# 🏗️ **Crystallize Shape Creation Guide for Railway API Compatibility**

## **Railway GraphQL Schema to Match**

Based on the Railway API server, here's the exact field structure we need to replicate in Crystallize:

```graphql
type Product {
  id: ID!                    # Auto-generated by Crystallize
  name: String!              # Product name
  path: String!              # URL path/slug
  category: String!          # Product category
  description: Description!  # Rich text description
  specifications: Specifications!  # Technical specs
  features: Features!        # Product features
  images: [Image!]!         # Product images
  variants: [ProductVariant!]!  # Price variants
  price: Float!             # Base price
  currency: String!         # Currency (GBP)
  sourceUrl: String         # Original scraper URL
  extractedAt: String       # Scraping timestamp
  warranty: String          # Warranty info
}
```

## **🎯 Manual Shape Creation Steps in Crystallize**

### **1. Login to Crystallize Admin**
- Go to: https://pim.crystallize.com/
- Login with your credentials
- Navigate to: **Settings > Shapes**

### **2. Create New Product Shape**
- Click **"Create Shape"**
- **Shape Type**: `Product`
- **Shape Identifier**: `infrared-heater-product`
- **Shape Name**: `Infrared Heater Product`

### **3. Add Components (in this exact order)**

#### **Basic Information**
1. **Component ID**: `name`
   - **Type**: Single Line Text
   - **Name**: Product Name
   - **Required**: Yes

2. **Component ID**: `category`
   - **Type**: Single Line Text  
   - **Name**: Category
   - **Required**: Yes

3. **Component ID**: `path`
   - **Type**: Single Line Text
   - **Name**: URL Path/Slug
   - **Required**: Yes

#### **Content Sections**
4. **Component ID**: `description`
   - **Type**: Rich Text Editor
   - **Name**: Product Description
   - **Required**: Yes

5. **Component ID**: `features`
   - **Type**: Rich Text Editor
   - **Name**: Product Features
   - **Required**: Yes

#### **Technical Specifications**
6. **Component ID**: `specifications`
   - **Type**: Component Choice / Piece
   - **Name**: Technical Specifications
   - **Required**: Yes
   - **Sub-components**:
     - `wattage` (Numeric, Name: "Wattage (W)")
     - `dimensions` (Single Line, Name: "Dimensions")
     - `weight` (Numeric, Name: "Weight (kg)")
     - `coverage` (Single Line, Name: "Coverage Area")
     - `mounting` (Single Line, Name: "Mounting Type")
     - `efficiency` (Single Line, Name: "Efficiency Rating")

#### **Media**
7. **Component ID**: `images`
   - **Type**: Images
   - **Name**: Product Images
   - **Required**: Yes
   - **Multiple**: Yes

#### **Pricing & Variants**
8. **Component ID**: `variants`
   - **Type**: Component Choice / Piece
   - **Name**: Product Variants
   - **Required**: Yes
   - **Multiple**: Yes
   - **Sub-components**:
     - `name` (Single Line, Name: "Variant Name")
     - `sku` (Single Line, Name: "SKU")
     - `price` (Numeric, Name: "Price")
     - `currency` (Single Line, Name: "Currency", Default: "GBP")
     - `stock` (Numeric, Name: "Stock Level")
     - `isDefault` (Boolean, Name: "Default Variant")

9. **Component ID**: `price`
   - **Type**: Numeric
   - **Name**: Base Price
   - **Required**: Yes

10. **Component ID**: `currency`
    - **Type**: Single Line Text
    - **Name**: Currency Code
    - **Required**: Yes
    - **Default Value**: "GBP"

#### **Metadata**
11. **Component ID**: `sourceUrl`
    - **Type**: Single Line Text
    - **Name**: Source URL
    - **Required**: No

12. **Component ID**: `extractedAt`
    - **Type**: Single Line Text
    - **Name**: Extraction Date
    - **Required**: No

13. **Component ID**: `warranty`
    - **Type**: Single Line Text
    - **Name**: Warranty Information
    - **Required**: No

### **4. Save the Shape**
- Click **"Create Shape"**
- Verify all components are created correctly
- Test by creating a sample product

## **✅ Validation Checklist**

After creating the shape, verify:
- [ ] Shape identifier is `infrared-heater-product`
- [ ] All 13 components are created
- [ ] Component IDs match exactly (case-sensitive)
- [ ] Required fields are marked correctly
- [ ] Images component allows multiple uploads
- [ ] Specifications and variants are structured correctly

## **🚀 Next Steps After Shape Creation**

1. **Update Import Script**: Modify `final-working-import.js` to use:
   ```javascript
   shapeIdentifier: "infrared-heater-product"
   ```

2. **Test Product Creation**: Create one test product manually to verify the shape works

3. **Run Bulk Import**: Execute the import script with all 36 products

4. **Test Frontend Integration**: Verify Crystallize + Railway API work together

## **📊 Expected Result**

Once the shape is created and products are imported:
- **Crystallize**: Provides content (images, descriptions, structured data)
- **Railway API**: Provides enhanced metadata and search capabilities  
- **Frontend**: Combines both data sources seamlessly

The shape will perfectly match the Railway GraphQL schema, ensuring consistent data structure across the entire stack.
